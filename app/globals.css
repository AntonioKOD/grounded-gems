@import "tailwindcss/preflight";
@import "tailwindcss/utilities";

/* Mapbox GL JS Canvas Fix for Vite/React 18 */
.mapboxgl-map,
.mapboxgl-canvas-container,
.mapboxgl-canvas {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  width: 100% !important;
  height: 100% !important;
}

/* Marker Styles */
.marker-container {
  width: 32px;
  height: 32px;
  cursor: pointer;
  position: relative;
  transform-origin: bottom center;
  transition: all 0.2s ease;
}

.marker-container:hover {
  transform: scale(1.1) translateY(-2px);
}

.marker-image-only {
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  color: hsl(var(--primary));
}

.marker-icon {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.marker-icon svg {
  width: 32px;
  height: 32px;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
}

.marker-container.selected .marker-icon {
  color: hsl(var(--destructive));
  transform: scale(1.1);
}

/* Tooltip Styles */
.marker-tooltip {
  min-width: 200px;
  background: white;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  padding: 8px;
  pointer-events: none;
  opacity: 0;
  transition: all 0.2s ease;
  z-index: 1000;
  margin-bottom: 8px;
}

.marker-container:hover .marker-tooltip {
  opacity: 1;
  pointer-events: auto;
}

.tooltip-button {
  width: 100%;
  padding: 8px;
  margin-top: 8px;
  background-color: hsl(var(--primary));
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
}

.tooltip-button:hover {
  background-color: hsl(var(--primary) / 0.9);
  transform: translateY(-1px);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.tooltip-button:active {
  transform: translateY(0);
}

/* User Location Marker */
.user-location-marker {
  width: 16px;
  height: 16px;
  background-color: hsl(var(--primary));
  border: 2px solid white;
  border-radius: 50%;
  box-shadow: 0 0 0 2px rgba(var(--primary), 0.2);
}

@keyframes pulse {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  100% {
    transform: scale(2);
    opacity: 0;
  }
}

.user-location-pulse {
  position: absolute;
  width: 32px;
  height: 32px;
  background-color: hsl(var(--primary) / 0.15);
  border: 1px solid hsl(var(--primary) / 0.3);
  border-radius: 50%;
  animation: pulse 2s infinite;
  transform: translate(-25%, -25%);
}

/* Feed animations */
@keyframes like {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.2); }
}

@keyframes save {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.15) rotate(-10deg); }
}

.animate-like {
  animation: like 0.3s ease-in-out;
}

.animate-save {
  animation: save 0.3s ease-in-out;
}

/* Feed post styles */
.feed-post {
  touch-action: pan-y pinch-zoom;
  will-change: transform;
  transform: translateZ(0);
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

.feed-post-actions {
  transform: translateZ(0);
  will-change: transform;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

/* Feed-specific mobile styles */
.feed-container {
  height: 100dvh;
  height: -webkit-fill-available;
  overscroll-behavior-y: contain;
  width: 100vw;
  max-width: 100%;
  overflow: hidden;
}

/* Instagram-style feed optimizations */
.mobile-instagram-feed {
  height: 100vh;
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
}

/* Hide scrollbar on mobile for cleaner look */
@media (max-width: 768px) {
  .mobile-instagram-feed::-webkit-scrollbar {
    display: none;
  }
  .mobile-instagram-feed {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
}

/* Optimize images for Instagram-style layout */
.instagram-post-image {
  object-fit: cover;
  width: 100%;
  height: 100%;
}

/* Scrollbar hide utility class */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* Enhanced mobile styles */
@media (max-width: 767px) {
  /* Prevent zoom on form inputs */
  input, select, textarea {
    font-size: 16px !important;
  }
  
  /* Better touch targets */
  button, .button, a[role="button"] {
    min-height: 44px;
    min-width: 44px;
    padding: 12px 16px;
  }
  
  /* Improved tap highlighting */
  button, .button, a {
    -webkit-tap-highlight-color: rgba(255, 107, 107, 0.1);
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
  }
  
  /* Prevent text selection during touch interactions */
  .no-select {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
  
  /* Feed header styles */
  .sticky-header {
    background: linear-gradient(180deg,
      rgba(0, 0, 0, 1) 0%,
      rgba(0, 0, 0, 0.8) 50%,
      rgba(0, 0, 0, 0) 100%
    );
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }

  /* Button hover effects */
  .feed-button {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .feed-button:active {
    transform: scale(0.95);
  }

  /* Improved scrollbar for category scroll */
  .category-scroll::-webkit-scrollbar {
    height: 1px;
  }

  .category-scroll::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
  }

  .category-scroll::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 1px;
  }

  /* Better scrolling */
  .mobile-scroll {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
    scroll-behavior: smooth;
    scroll-snap-type: y mandatory;
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .mobile-scroll::-webkit-scrollbar {
    display: none;
  }
  
  /* Fix for mobile keyboard pushing content */
  .mobile-safe {
    padding-bottom: var(--safe-area-inset-bottom, 0px);
    padding-top: var(--safe-area-inset-top, 0px);
  }

  /* Post transitions */
  .feed-post {
    width: 100vw;
    height: 100dvh;
    max-height: -webkit-fill-available;
    touch-action: pan-y pinch-zoom;
    will-change: transform;
    transform: translateZ(0);
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
  }

  .feed-post-enter {
    opacity: 0;
    transform: scale(0.98);
  }

  .feed-post-enter-active {
    opacity: 1;
    transform: scale(1);
    transition: opacity 300ms, transform 300ms;
  }

  /* Enhanced gradients */
  .feed-post-gradient {
    background: linear-gradient(
      180deg,
      transparent 0%,
      rgba(0, 0, 0, 0.4) 50%,
      rgba(0, 0, 0, 0.95) 100%
    );
  }

  /* Button animations */
  @keyframes button-press {
    0% { transform: scale(1); }
    50% { transform: scale(0.95); }
    100% { transform: scale(1); }
  }

  .button-press {
    animation: button-press 0.2s ease-in-out;
  }

  /* FAB-specific bottom positioning for mobile navigation */
  .bottom-fab {
    /* Mobile: position above mobile nav (h-16 = 4rem) + safe area + spacing */
    bottom: calc(4rem + var(--safe-area-inset-bottom, 0px) + 1rem);
  }

  .mobile-feed-container {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100vw;
    height: 100vh;
    margin: 0;
    padding: 0;
  }
  
  /* Hide scrollbars on mobile */
  .mobile-scroll::-webkit-scrollbar {
    display: none;
  }
  
  .mobile-scroll {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  /* Ensure full viewport coverage for mobile feed */
  .mobile-feed-post {
    width: 100vw !important;
    height: 100vh !important;
    position: absolute;
    inset: 0;
  }
}

@media (min-width: 768px) {
  .bottom-fab {
    /* Desktop: normal bottom positioning */
    bottom: max(24px, var(--safe-area-inset-bottom, 24px));
  }
}

/* Floating button styles */
.floating-button-wrapper {
  position: fixed;
  z-index: 40; /* Below mobile nav (z-50) but above content */
  /* pointer-events: none; */
}

.floating-button-wrapper > * {
  pointer-events: auto;
}

/* Tablet specific styles */
@media (min-width: 768px) and (max-width: 1023px) {
  .container {
    padding: 0 24px;
  }
  
  /* Better touch targets for tablet */
  button, .button {
    min-height: 40px;
    min-width: 40px;
  }

  /* Feed-specific tablet styles */
  .feed-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 24px;
  }
}

/* Desktop specific styles */
@media (min-width: 1024px) {
  /* Hover effects only on desktop */
  .hover-only:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }

  /* Feed-specific desktop styles */
  .feed-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 32px;
  }

  .feed-post:hover .feed-post-overlay {
    opacity: 1;
  }
}

/* Safe area handling for notched devices */
.safe-area-bottom {
  padding-bottom: var(--safe-area-inset-bottom, 0px);
}

.safe-area-top {
  padding-top: var(--safe-area-inset-top, 0px);
}

/* Feed post transitions */
.feed-post-enter {
  opacity: 0;
  transform: scale(0.9);
}

.feed-post-enter-active {
  opacity: 1;
  transform: scale(1);
  transition: opacity 300ms, transform 300ms;
}

.feed-post-exit {
  opacity: 1;
  transform: scale(1);
}

.feed-post-exit-active {
  opacity: 0;
  transform: scale(0.9);
  transition: opacity 300ms, transform 300ms;
}

/* Comment System Animations */
@keyframes bounce-in {
  0% { transform: scale(0.3) translateY(20px); opacity: 0; }
  50% { transform: scale(1.05) translateY(-5px); opacity: 0.8; }
  70% { transform: scale(0.9) translateY(2px); opacity: 0.9; }
  100% { transform: scale(1) translateY(0); opacity: 1; }
}

@keyframes sentiment-pop {
  0% { transform: scale(0) rotate(-180deg); opacity: 0; }
  50% { transform: scale(1.2) rotate(-90deg); opacity: 0.8; }
  100% { transform: scale(1) rotate(0deg); opacity: 1; }
}

@keyframes typing-dots {
  0%, 20% { opacity: 0.4; transform: translateY(0); }
  50% { opacity: 1; transform: translateY(-3px); }
  80%, 100% { opacity: 0.4; transform: translateY(0); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 5px rgba(255, 107, 107, 0.3); }
  50% { box-shadow: 0 0 20px rgba(255, 107, 107, 0.6), 0 0 30px rgba(255, 107, 107, 0.4); }
}

@keyframes connection-flow {
  0% { transform: translateY(-100%); }
  50% { transform: translateY(0%); }
  100% { transform: translateY(100%); }
}

.animate-bounce-in {
  animation: bounce-in 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.animate-sentiment-pop {
  animation: sentiment-pop 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.animate-typing-dots {
  animation: typing-dots 1.4s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

/* Comment system specific styles */
.comment-card {
  backdrop-filter: blur(10px);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.comment-card:hover {
  transform: translateY(-2px);
}

.comment-reaction-btn {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.comment-reaction-btn:hover {
  transform: scale(1.1);
}

.comment-reaction-btn:active {
  transform: scale(0.95);
}

/* Reply connection line animation */
.reply-connection {
  position: relative;
  overflow: hidden;
}

.reply-connection::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.1), transparent);
  transform: translateY(-100%);
  animation: connection-flow 3s ease-in-out infinite;
}

/* Safe area utilities */
.bottom-safe {
  bottom: max(24px, var(--safe-area-inset-bottom, 24px));
}

.right-safe {
  right: max(16px, var(--safe-area-inset-right, 16px));
}

.left-safe {
  left: max(16px, var(--safe-area-inset-left, 16px));
}

/* Enhanced scrollbar hiding for all feed containers */
.snap-scroll-container::-webkit-scrollbar {
  display: none;
}

.snap-scroll-container {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

/* Mobile-first responsive design */
@media (max-width: 768px) {
  /* Mobile feed optimizations */
  .snap-scroll-container {
    scroll-snap-type: y mandatory;
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }
  
  .snap-scroll-container > * {
    scroll-snap-align: start;
  }
  
  /* Ensure proper spacing for 80vh posts */
  .mobile-post-container {
    height: 80vh;
    min-height: 400px;
    max-height: 80vh;
  }
  
  /* Hide scrollbars for cleaner mobile experience */
  .snap-scroll-container::-webkit-scrollbar {
    display: none;
  }
  
  .snap-scroll-container {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  /* Ensure touch targets are large enough */
  button, .clickable {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Better text scaling on mobile */
  .mobile-optimized {
    font-size: clamp(0.875rem, 2.5vw, 1rem);
    line-height: 1.5;
  }
}

/* Enhanced Marker Styles */
.location-marker {
  @apply cursor-pointer select-none;
  transition: all 0.3s ease;
  position: absolute !important;
  transform: translate(-50%, -100%) !important;
  transform-origin: center bottom !important;
  z-index: 40;
}

.location-marker:hover {
  z-index: 65 !important;
  /* Remove scale transforms to prevent movement */
}

.location-marker.selected {
  z-index: 60 !important;
  /* Remove scale transforms to prevent movement */
}

/* Enhanced cluster marker styles with branding colors */
.cluster-marker {
  @apply cursor-pointer select-none;
  transition: all 0.3s ease;
  position: absolute !important;
  transform: translate(-50%, -100%) !important;
  transform-origin: center bottom !important;
  z-index: 45;
}

.cluster-marker:hover {
  z-index: 65 !important;
  /* Remove scale transforms to prevent movement */
}

/* Enhanced cluster preview with clickable location items */
.cluster-preview .location-item {
  @apply cursor-pointer transition-colors;
}

.cluster-preview .location-item:hover {
  @apply bg-muted/80;
}

.cluster-preview .location-item:active {
  @apply bg-muted;
}

/* Enhanced marker previews */
.marker-preview {
  position: fixed;
  top: 50%;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  animation: fade-in-up 0.3s ease-out forwards;
  max-height: 40vh;
  overflow-y: auto;
}

.marker-preview .view-details-btn,
.marker-preview .directions-btn {
  @apply transition-colors cursor-pointer;
}

.cluster-preview {
  position: absolute;
  z-index: 50;
  pointer-events: auto;
}

.cluster-preview .expand-cluster-btn {
  @apply transition-colors cursor-pointer;
}

/* Spiderify animations */
@keyframes spiderify-expand {
  from {
    opacity: 0;
    transform: scale(0) translate(-50%, -50%);
  }
  50% {
    opacity: 0.5;
    transform: scale(0.7) translate(-50%, -50%);
  }
  to {
    opacity: 1;
    transform: scale(1) translate(-50%, -50%);
  }
}

@keyframes spiderify-contract {
  from {
    opacity: 1;
    transform: scale(1) translate(-50%, -50%);
  }
  50% {
    opacity: 0.5;
    transform: scale(0.7) translate(-50%, -50%);
  }
  to {
    opacity: 0;
    transform: scale(0) translate(-50%, -50%);
  }
}

.spiderified-marker {
  animation: spiderify-expand 0.3s ease-out forwards;
}

.spiderified-marker.contracting {
  animation: spiderify-contract 0.3s ease-in forwards;
}

/* Cluster pulse animation */
@keyframes cluster-pulse {
  0% {
    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);
  }
  70% {
    box-shadow: 0 0 0 10px rgba(59, 130, 246, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0);
  }
}

.cluster-pulse {
  animation: cluster-pulse 2s infinite;
}

/* Enhanced tooltip button styles with branding colors */
.view-details-btn:hover {
  @apply bg-primary/90;
}

.directions-btn:hover {
  @apply bg-muted/80;
}

.expand-cluster-btn:hover {
  @apply bg-primary/90;
}

/* Button press animations */
.view-details-btn:active,
.directions-btn:active,
.expand-cluster-btn:active {
  transform: scale(0.95);
}

/* Ensure markers can overlap properly */
.mapboxgl-marker {
  /* Ensure markers use our positioning */
}

/* Enhanced marker interactions */
.location-marker:active {
  /* Use transform without changing position for active state */
  transform: translate(-50%, -100%) scale(0.95) !important;
}

/* Mobile touch optimizations */
@media (max-width: 768px) {
  .location-marker {
    /* Prevent hover effects on mobile to avoid stickiness */
    transform: translate(-50%, -100%) !important;
    /* Larger touch targets for better accessibility */
    min-width: 44px;
    min-height: 44px;
  }
  
  .cluster-marker {
    /* Prevent hover effects on mobile */
    transform: translate(-50%, -100%) !important;
    /* Larger touch targets */
    min-width: 44px;
    min-height: 44px;
  }
  
  .marker-preview,
  .cluster-preview {
    /* Better positioning for mobile */
    max-width: 90vw;
  }
  
  .cluster-marker .w-8 {
    /* Ensure touch targets are large enough on mobile */
    min-width: 44px;
    min-height: 44px;
  }
  
  .location-marker:active,
  .cluster-marker:active {
    /* Visual feedback without position change */
    opacity: 0.8;
  }
  
  .location-marker.touching {
    transform: translate(-50%, -100%) scale(1.1) !important;
  }
  
  .cluster-marker.touching {
    transform: translate(-50%, -100%) scale(1.1) !important;
  }

  .mobile-bottom-sheet {
    z-index: 99999 !important;
  }
  
  .mobile-modal {
    z-index: 99998 !important;
  }
  
  .mobile-backdrop {
    z-index: 99997 !important;
  }
  
  .cluster-location-item {
    @apply p-3 border-b border-gray-100 last:border-b-0 cursor-pointer transition-colors;
  }
  
  .mobile-slide-up {
    transform: translateY(100%);
    transition: transform 0.3s ease-out;
  }
  
  .mobile-slide-up.open {
    transform: translateY(0);
  }
}

/* Marker gradient animations */
.location-marker svg,
.cluster-marker svg {
  transition: filter 0.3s ease;
}

.location-marker:hover svg,
.cluster-marker:hover svg {
  filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2)) brightness(1.1);
}

/* Line clamping for marker preview text */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Enhanced scrollbar for cluster location lists */
.cluster-preview .space-y-2 {
  scrollbar-width: thin;
  scrollbar-color: rgba(156, 163, 175, 0.5) transparent;
}

.cluster-preview .space-y-2::-webkit-scrollbar {
  width: 4px;
}

.cluster-preview .space-y-2::-webkit-scrollbar-track {
  background: transparent;
}

.cluster-preview .space-y-2::-webkit-scrollbar-thumb {
  background: rgba(156, 163, 175, 0.5);
  border-radius: 2px;
}

.cluster-preview .space-y-2::-webkit-scrollbar-thumb:hover {
  background: rgba(156, 163, 175, 0.7);
}

/* Tooltip arrow enhancements */
.marker-preview .absolute.top-full,
.cluster-preview .absolute.top-full {
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
}

@layer base {
  :root {
    /* Sacavia Earth-Tone Brand Colors */
    --sacavia-saddle-brown: 25 45% 27%; /* #8B4513 converted to HSL */
    --sacavia-tan: 34 23% 69%; /* #D2B48C converted to HSL */
    --sacavia-burnt-sienna: 16 75% 42%; /* #CC5500 */
    --sacavia-terracotta: 14 60% 55%; /* #CD853F */
    --sacavia-sage: 120 25% 65%; /* #9CAF88 */
    --sacavia-clay: 15 50% 45%; /* #B07142 */
    --sacavia-sand: 45 30% 85%; /* #F4E4BC */
    --sacavia-stone: 30 10% 50%; /* #8A8680 */
    --sacavia-copper: 30 60% 40%; /* #B87333 */
    --sacavia-moss: 100 20% 35%; /* #5F7A61 */

    /* Enhanced Brand Color System */
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    
    /* Primary uses Sacavia saddle brown */
    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;
    
    /* Secondary uses warm tan tones */
    --secondary: 210 40% 96%;
    --secondary-foreground: 222.2 84% 4.9%;
    
    /* Muted colors with earth undertones */
    --muted: 210 40% 96%;
    --muted-foreground: 215.4 16.3% 46.9%;
    
    /* Accent uses terracotta */
    --accent: 210 40% 96%;
    --accent-foreground: 222.2 84% 4.9%;
    
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    
    /* Borders with subtle earth tones */
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;
    --radius: 0.5rem;
    
    /* Enhanced chart colors with earth tones */
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
  }

  .dark {
    /* Dark mode with earth-tone integration */
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    
    /* Primary remains brand color but adjusted for dark mode */
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;
    
    /* Secondary with dark earth tones */
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    
    /* Muted with warm dark tones */
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    
    /* Accent adjusted for dark mode */
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    
    /* Dark mode borders */
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
    
    /* Dark mode chart colors */
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* Sacavia Brand Utility Classes */
@layer utilities {
  /* Earth-tone backgrounds */
  .bg-sacavia-primary {
    background-color: hsl(var(--sacavia-saddle-brown));
  }
  .bg-sacavia-secondary {
    background-color: hsl(var(--sacavia-tan));
  }
  .bg-sacavia-accent {
    background-color: hsl(var(--sacavia-terracotta));
  }
  .bg-sacavia-sage {
    background-color: hsl(var(--sacavia-sage));
  }
  .bg-sacavia-sand {
    background-color: hsl(var(--sacavia-sand));
  }
  .bg-sacavia-stone {
    background-color: hsl(var(--sacavia-stone));
  }

  /* Earth-tone text colors */
  .text-sacavia-primary {
    color: hsl(var(--sacavia-saddle-brown));
  }
  .text-sacavia-secondary {
    color: hsl(var(--sacavia-tan));
  }
  .text-sacavia-accent {
    color: hsl(var(--sacavia-terracotta));
  }
  .text-sacavia-sage {
    color: hsl(var(--sacavia-sage));
  }
  .text-sacavia-copper {
    color: hsl(var(--sacavia-copper));
  }
  .text-sacavia-moss {
    color: hsl(var(--sacavia-moss));
  }

  /* Earth-tone borders */
  .border-sacavia-primary {
    border-color: hsl(var(--sacavia-saddle-brown));
  }
  .border-sacavia-secondary {
    border-color: hsl(var(--sacavia-tan));
  }
  .border-sacavia-accent {
    border-color: hsl(var(--sacavia-terracotta));
  }

  /* Branded gradient backgrounds */
  .bg-gradient-sacavia {
    background: linear-gradient(135deg, 
      hsl(var(--sacavia-saddle-brown)) 0%, 
      hsl(var(--sacavia-terracotta)) 50%, 
      hsl(var(--sacavia-tan)) 100%);
  }
  
  .bg-gradient-sacavia-warm {
    background: linear-gradient(135deg, 
      hsl(var(--sacavia-sand)) 0%, 
      hsl(var(--sacavia-tan)) 50%, 
      hsl(var(--sacavia-terracotta)) 100%);
  }

  .bg-gradient-sacavia-earth {
    background: linear-gradient(135deg, 
      hsl(var(--sacavia-moss)) 0%, 
      hsl(var(--sacavia-sage)) 50%, 
      hsl(var(--sacavia-sand)) 100%);
  }

  /* Branded shadow effects */
  .shadow-sacavia {
    box-shadow: 0 4px 6px -1px hsl(var(--sacavia-saddle-brown) / 0.1), 
                0 2px 4px -1px hsl(var(--sacavia-saddle-brown) / 0.06);
  }
  
  .shadow-sacavia-lg {
    box-shadow: 0 10px 15px -3px hsl(var(--sacavia-saddle-brown) / 0.1), 
                0 4px 6px -2px hsl(var(--sacavia-saddle-brown) / 0.05);
  }

  /* Interactive states with earth tones */
  .hover-sacavia {
    transition: all 0.2s ease-in-out;
  }
  .hover-sacavia:hover {
    background-color: hsl(var(--sacavia-terracotta) / 0.1);
    transform: translateY(-1px);
  }

  /* Focus states with brand colors */
  .focus-sacavia:focus-visible {
    outline: 2px solid hsl(var(--sacavia-saddle-brown));
    outline-offset: 2px;
  }

  /* Branded button variants */
  .btn-sacavia-primary {
    @apply bg-sacavia-primary text-white hover:opacity-90 focus-sacavia;
    transition: all 0.2s ease-in-out;
  }
  
  .btn-sacavia-secondary {
    @apply bg-sacavia-secondary text-sacavia-primary hover:bg-opacity-80 focus-sacavia;
    transition: all 0.2s ease-in-out;
  }
  
  .btn-sacavia-outline {
    @apply border-2 border-sacavia-primary text-sacavia-primary bg-transparent hover:bg-sacavia-primary hover:text-white focus-sacavia;
    transition: all 0.2s ease-in-out;
  }

  /* Native American-inspired geometric patterns */
  .pattern-sacavia-diamonds {
    background-image: 
      linear-gradient(45deg, hsl(var(--sacavia-tan) / 0.1) 25%, transparent 25%),
      linear-gradient(-45deg, hsl(var(--sacavia-tan) / 0.1) 25%, transparent 25%),
      linear-gradient(45deg, transparent 75%, hsl(var(--sacavia-tan) / 0.1) 75%),
      linear-gradient(-45deg, transparent 75%, hsl(var(--sacavia-tan) / 0.1) 75%);
    background-size: 20px 20px;
    background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
  }

  .pattern-sacavia-mountains {
    background-image: 
      repeating-linear-gradient(0deg, 
        hsl(var(--sacavia-sage) / 0.1) 0px, 
        hsl(var(--sacavia-sage) / 0.1) 1px, 
        transparent 1px, 
        transparent 20px),
      repeating-linear-gradient(90deg, 
        hsl(var(--sacavia-moss) / 0.05) 0px, 
        hsl(var(--sacavia-moss) / 0.05) 1px, 
        transparent 1px, 
        transparent 20px);
  }

  /* Custom scrollbar styles */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  
  .scrollbar-thin {
    scrollbar-width: thin;
  }
  
  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  
  .scrollbar-thin::-webkit-scrollbar-track {
    @apply bg-gray-100 rounded-full;
  }
  
  .scrollbar-thin::-webkit-scrollbar-thumb {
    @apply bg-gray-300 rounded-full hover:bg-gray-400;
  }
  
  .scrollbar-purple {
    scrollbar-width: thin;
  }
  
  .scrollbar-purple::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  
  .scrollbar-purple::-webkit-scrollbar-track {
    @apply bg-purple-50 rounded-full;
  }
  
  .scrollbar-purple::-webkit-scrollbar-thumb {
    @apply bg-purple-300 rounded-full hover:bg-purple-400;
  }
}

/* Enhanced animations */
@layer utilities {
  .animate-fade-in {
    animation: fadeIn 0.5s ease-in-out;
  }
  
  .animate-slide-up {
    animation: slideUp 0.3s ease-out;
  }
  
  .animate-bounce-gentle {
    animation: bounceGentle 2s infinite;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes bounceGentle {
  0%, 20%, 50%, 80%, 100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-2px);
  }
  60% {
    transform: translateY(-1px);
  }
}

/* Feed specific styles */
.feed-card {
  @apply bg-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 rounded-2xl overflow-hidden;
}

.feed-card-gradient {
  @apply bg-gradient-to-br from-white via-gray-50 to-white;
}

/* Improved focus states */
.focus-ring {
  @apply focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition-all;
}

/* Map component styles */
.mapboxgl-map {
  font-family: inherit;
}

.mapboxgl-ctrl-group {
  @apply shadow-lg border border-gray-200;
}

.mapboxgl-ctrl button {
  @apply bg-white hover:bg-gray-50 transition-colors;
}

.mapboxgl-ctrl-group:not(:empty) {
  @apply shadow-lg border border-gray-200;
}

/* Enhanced marker styles */
.location-marker {
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  transform-origin: center bottom;
  will-change: transform;
}

.location-marker:hover {
  transform: scale(1.05);
}

.location-marker.selected {
  transform: scale(1.1);
  z-index: 60 !important;
}

/* User location marker */
.user-location-marker {
  z-index: 70 !important;
  position: relative;
}

/* Mobile specific adjustments */
@media (max-width: 768px) {
  .mapboxgl-ctrl-group {
    @apply scale-90;
    margin-bottom: 100px !important; /* Avoid mobile nav */
  }
  
  .mapboxgl-ctrl-group button {
    min-width: 48px !important;
    min-height: 48px !important;
    border-radius: 12px !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
    backdrop-filter: blur(10px) !important;
    background: rgba(255, 255, 255, 0.95) !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
  }
  
  .location-marker {
    transform-origin: center center;
    min-width: 44px; /* Ensure touch targets are at least 44px */
    min-height: 44px;
  }
  
  .location-marker:hover {
    transform: none;
  }
  
  .location-marker.selected {
    transform: scale(1.05);
  }
  
  /* Hide desktop tooltips on mobile */
  .marker-preview,
  .cluster-preview {
    display: none !important;
  }
  
  /* Improve touch performance */
  .mapboxgl-map {
    touch-action: manipulation !important; /* Enable pinch-zoom on mobile */
    -webkit-touch-callout: none !important;
    -webkit-user-select: none !important;
    user-select: none !important;
    /* Improve scrolling performance */
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: none;
  }
  
  /* Better mobile scrolling */
  .map-container {
    touch-action: manipulation !important; /* Allow all touch gestures for map interaction */
    overscroll-behavior: none !important;
    -webkit-overflow-scrolling: touch !important;
    /* Prevent page bounce while allowing map gestures */
    overscroll-behavior-y: none;
    overscroll-behavior-x: none;
  }
  
  /* Enhanced toggle button for mobile */
  .fixed.bottom-24.left-4 button {
    backdrop-filter: blur(20px) !important;
    -webkit-backdrop-filter: blur(20px) !important;
  }
}

/* Tooltip animations */
.marker-preview,
.cluster-preview {
  animation: fadeInUp 0.3s ease-out forwards;
  transform-origin: center bottom;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translate(-50%, 10px);
  }
  to {
    opacity: 1;
    transform: translate(-50%, 0);
  }
}

/* Prevent text selection on markers */
.location-marker * {
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}

/* Touch feedback for mobile */
@media (max-width: 768px) {
  .location-marker:active {
    transform: scale(0.95);
    transition: transform 0.1s ease-out;
  }
}

/* Line clamp utility for text truncation */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Custom animations for mobile modal */
@media (max-width: 768px) {
  .mobile-modal-enter {
    animation: slideUpIn 0.3s ease-out forwards;
  }
  
  .mobile-modal-exit {
    animation: slideDownOut 0.3s ease-in forwards;
  }
}

@keyframes slideUpIn {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slideDownOut {
  from {
    transform: translateY(0);
    opacity: 1;
  }
  to {
    transform: translateY(100%);
    opacity: 0;
  }
}

/* Enhanced button transitions */
.location-marker button {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.location-marker button:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);
}

.location-marker button:active {
  transform: translateY(0);
}

/* Responsive map container */
.map-container {
  position: relative;
  width: 100%;
  height: 100%;
  min-height: 300px;
}

@media (max-width: 640px) {
  .map-container {
    min-height: 250px;
  }
}

/* Loading spinner enhancement */
.map-loading-spinner {
  border-width: 3px;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* Accessibility improvements */
.location-marker:focus-visible {
  outline: 2px solid #FF6B6B;
  outline-offset: 2px;
}

/* High contrast mode adjustments */
@media (prefers-contrast: high) {
  .location-marker {
    filter: contrast(1.2);
  }
  
  .marker-preview,
  .cluster-preview {
    border: 2px solid #000;
  }
}

/* Reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .location-marker,
  .marker-preview,
  .cluster-preview,
  .mobile-modal-enter,
  .mobile-modal-exit {
    animation: none;
    transition: none;
  }
  
  .location-marker:hover {
    transform: none;
  }
}

/* Safe area adjustments for mobile devices with notches */
@supports (padding: max(0px)) {
  @media (max-width: 768px) {
    .mobile-preview-modal {
      padding-bottom: max(var(--safe-area-inset-bottom, 0px), 20px);
    }
  }
}

/* Mapbox GL JS Fixes and Improvements */
.mapboxgl-ctrl-group {
  @apply shadow-lg border border-gray-200;
}

.mapboxgl-ctrl-group button {
  @apply bg-white hover:bg-gray-50 transition-colors;
}

.mapboxgl-popup-content {
  @apply rounded-lg shadow-lg border border-gray-200;
  padding: 0 !important;
}

.mapboxgl-popup-close-button {
  @apply text-gray-500 hover:text-gray-700 text-lg font-bold;
  right: 8px !important;
  top: 8px !important;
}

.mapboxgl-popup-tip {
  @apply border-t-gray-200;
}

/* Map container styling */
.map-container {
  position: relative;
  width: 100%;
  height: 100%;
}

/* Marker pin custom styles */
.marker-pin {
  will-change: transform;
}

.marker-pin:hover {
  z-index: 999 !important;
}

/* Mobile optimizations */
@media (max-width: 768px) {
  .mapboxgl-ctrl-group {
    @apply scale-90;
  }
  
  .mapboxgl-popup-content {
    max-width: calc(100vw - 40px) !important;
  }
}

/* Fullscreen map styles */
.fullscreen-with-navbar {
  height: calc(100vh - var(--navbar-height, 64px));
  min-height: calc(100vh - var(--navbar-height, 64px));
}

.navbar-offset {
  padding-top: 4rem; /* 64px for mobile navbar height (h-16) */
}

/* Loading animations */
.map-loading {
  @apply bg-gradient-to-br from-blue-50 to-blue-100;
}

.map-loading::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  animation: shimmer 2s infinite;
}

@keyframes shimmer {
  0% { left: -100%; }
  100% { left: 100%; }
}

/* Map marker animations */
@keyframes markerPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}

.marker-selected {
  animation: markerPulse 1s ease-in-out infinite;
}

/* User location pulse animation */
@keyframes pulse {
  0% { 
    transform: scale(0.8); 
    opacity: 1; 
  }
  100% { 
    transform: scale(2.5); 
    opacity: 0; 
  }
}

/* Mapbox attribution fixes */
.mapboxgl-ctrl-attrib {
  @apply text-xs bg-white/80 backdrop-blur-sm;
}

/* Fix for Next.js hydration issues with Mapbox */
.mapboxgl-map {
  font-family: inherit;
}

/* Improve touch targets on mobile */
@media (max-width: 768px) {
  .mapboxgl-ctrl-group button {
    min-width: 44px;
    min-height: 44px;
  }
}

/* Dark mode support for map controls */
@media (prefers-color-scheme: dark) {
  .mapboxgl-ctrl-group {
    @apply bg-gray-800 border-gray-700;
  }
  
  .mapboxgl-ctrl-group button {
    @apply bg-gray-800 text-white hover:bg-gray-700;
  }
  
  .mapboxgl-popup-content {
    @apply bg-gray-800 border-gray-700 text-white;
  }
}

/* Location preview tooltip styles */
.location-preview {
  position: absolute;
  z-index: 50;
  pointer-events: auto;
  max-width: 320px;
  min-width: 280px;
  filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.2));
}

.location-preview .location-preview-btn {
  @apply transition-all duration-200 cursor-pointer;
}

.location-preview .location-preview-btn:hover {
  transform: translateY(-1px);
}

.location-preview .location-preview-btn:active {
  transform: translateY(0) scale(0.98);
}

/* Ensure proper line clamping for descriptions */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Additional mobile optimizations */
@media (max-width: 768px) {
  .location-preview {
    display: none !important;
  }
  
  .cluster-preview {
    display: none !important;
  }
}

/* Mobile-specific optimizations for the feed */
@media (max-width: 768px) {
  .mobile-feed-container {
    height: 100vh;
    height: 100dvh; /* Dynamic viewport height for mobile browsers */
    overflow: hidden;
  }
  
  .mobile-post {
    height: 100vh;
    height: 100dvh;
    overflow: hidden;
  }
  
  /* Improve touch targets on mobile */
  .mobile-touch-target {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Safe area handling */
  .safe-area-bottom {
    padding-bottom: var(--safe-area-inset-bottom, 0px);
  }
  
  .safe-area-top {
    padding-top: var(--safe-area-inset-top, 0px);
  }
  
  /* Improve video performance on mobile */
  video {
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
  }
  
  /* Smooth scrolling for mobile feed */
  .mobile-scroll {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }
}

/* Hide scrollbars but keep functionality */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* TikTok/Reels-style feed optimizations */
@media (max-width: 768px) {
  .mobile-scroll {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
    scroll-snap-type: y mandatory;
    overscroll-behavior: contain;
  }
  
  .mobile-scroll::-webkit-scrollbar {
    display: none;
  }
  
  /* Snap scrolling for posts */
  .snap-start {
    scroll-snap-align: start;
  }
  
  .snap-always {
    scroll-snap-stop: always;
  }
  
  /* Full viewport posts */
  .h-screen {
    height: 100vh;
    height: 100dvh; /* Dynamic viewport height for mobile browsers */
  }
  
  /* Ensure proper touch targets */
  .mobile-touch-target {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Better video performance */
  video {
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
    will-change: transform;
  }
  
  /* Optimize images */
  img {
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
  }
  
  /* Prevent overscroll on the main container */
  .overflow-hidden {
    overscroll-behavior: contain;
  }
}

/* Enhanced Search Styles */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Search animations */
@keyframes search-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.search-loading {
  animation: search-pulse 1.5s ease-in-out infinite;
}

/* Real-time search feedback */
.search-highlight {
  background: linear-gradient(120deg, #4ECDC4 0%, #FF6B6B 100%);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-weight: 600;
}

/* Enhanced card hover effects for search results */
.search-card {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  transform: translateZ(0);
}

.search-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
}

/* Search result type indicators */
.result-type-user {
  border-left: 4px solid #4ECDC4;
}

.result-type-location {
  border-left: 4px solid #FF6B6B;
}

/* Enhanced loading states */
@keyframes skeleton-loading {
  0% { background-position: -200px 0; }
  100% { background-position: calc(200px + 100%) 0; }
}

.skeleton {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200px 100%;
  animation: skeleton-loading 1.5s infinite;
}

/* Search suggestions */
.search-suggestion {
  transition: all 0.2s ease;
}

.search-suggestion:hover {
  background-color: rgba(78, 205, 196, 0.1);
  transform: translateX(4px);
}

/* Better focus states for accessibility */
.search-input:focus-visible {
  outline: 2px solid #4ECDC4;
  outline-offset: 2px;
}

/* Mobile search optimizations */
@media (max-width: 768px) {
  .search-card {
    transform: none;
    transition: background-color 0.2s ease;
  }
  
  .search-card:hover {
    transform: none;
    box-shadow: none;
    background-color: rgba(0, 0, 0, 0.02);
  }
  
  .search-card:active {
    background-color: rgba(0, 0, 0, 0.05);
    transform: scale(0.98);
  }
}

/* Improved tab transitions */
.search-tabs {
  position: relative;
}

.search-tabs::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  height: 2px;
  background: linear-gradient(90deg, #4ECDC4, #FF6B6B);
  transition: all 0.3s ease;
  border-radius: 1px;
}

/* Search filter dropdown */
.search-filter-dropdown {
  backdrop-filter: blur(10px);
  background: rgba(255, 255, 255, 0.95);
  border: 1px solid rgba(78, 205, 196, 0.2);
}

/* Enhanced scrollbar for search results */
.search-results::-webkit-scrollbar {
  width: 6px;
}

.search-results::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 3px;
}

.search-results::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, #4ECDC4, #FF6B6B);
  border-radius: 3px;
}

.search-results::-webkit-scrollbar-thumb:hover {
  background-color: #6B7280;
}

/* NavBar offset classes for fixed positioning */
.navbar-offset {
  padding-top: 4rem; /* 64px for mobile navbar height (h-16) */
}

@media (min-width: 1024px) {
  .navbar-offset {
    padding-top: 5rem; /* 80px for desktop navbar height (lg:h-20) */
  }
}

/* Alternative margin-based offset */
.navbar-margin {
  margin-top: 4rem; /* 64px for mobile navbar height (h-16) */
}

@media (min-width: 1024px) {
  .navbar-margin {
    margin-top: 5rem; /* 80px for desktop navbar height (lg:h-20) */
  }
}

/* Main content wrapper offset for desktop navigation */
@media (min-width: 768px) {
  main:not(.fullscreen-main) {
    padding-top: 4rem; /* 64px for mobile navbar height */
    min-height: calc(100vh - 4rem); /* Account for navbar height */
  }
}

@media (min-width: 1024px) {
  main:not(.fullscreen-main) {
    padding-top: 5rem; /* 80px for desktop navbar height */
    min-height: calc(100vh - 5rem); /* Account for navbar height */
  }
}

/* Fullscreen pages that should NOT have navbar padding */
main.fullscreen-main {
  padding-top: 0 !important;
  min-height: 100vh !important;
}

/* Specific pages that need different handling */
.main-with-navbar-offset {
  padding-top: 4rem;
}

@media (min-width: 1024px) {
  .main-with-navbar-offset {
    padding-top: 5rem;
  }
}

/* Fix anchor links that might be hidden behind the fixed navbar */
html {
  scroll-padding-top: 4rem; /* 64px for mobile navbar height */
  scroll-behavior: smooth; /* Smooth scrolling for better UX */
}

@media (min-width: 1024px) {
  html {
    scroll-padding-top: 5rem; /* 80px for desktop navbar height */
  }
} 

/* Enhanced Video Animations */
.video-play-button {
  transition: transform 1000ms linear(0, 0.1262, 0.4133, 0.7368, 1.0078, 1.1812, 1.2506, 1.2366, 1.1719, 1.0896, 1.0154, 0.9638, 0.9389, 0.9372, 0.9509, 0.9713, 0.9912, 1.0062, 1.0144, 1.0163, 1.0137, 1.0088, 1.0036, 0.9993, 0.9968, 1, 0.9962, 0.9974, 0.9987, 0.9999, 1.0007, 1, 1);
}

.video-play-button:hover {
  transform: scale(1.1);
}

.video-indicator {
  animation: videoPulse 2s ease-in-out infinite;
}

@keyframes videoPulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.05);
    opacity: 0.8;
  }
}

.video-overlay {
  background: linear-gradient(135deg, rgba(239, 68, 68, 0.9) 0%, rgba(236, 72, 153, 0.9) 100%);
  backdrop-filter: blur(8px);
}

.video-thumbnail {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.video-thumbnail:hover {
  transform: scale(1.02);
  filter: brightness(1.1);
} 

/* Profile Posts Grid Optimizations */
.video-card {
  /* Smaller, more subtle styling for video cards */
  transition: all 0.3s ease;
}

.video-card:hover {
  transform: scale(1.02);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
}

.image-card {
  /* Enhanced styling for image cards */
  transition: all 0.3s ease;
}

.image-card:hover {
  transform: scale(1.02);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
}

.video-thumbnail {
  /* Optimized video thumbnail display */
  object-fit: cover;
  transition: transform 0.3s ease;
}

.image-thumbnail {
  /* Optimized image thumbnail display */
  object-fit: cover;
  transition: transform 0.3s ease;
}

.video-indicator {
  /* Smaller, more subtle video indicator */
  backdrop-filter: blur(8px);
  transition: all 0.2s ease;
}

.video-play-button {
  /* Smaller, more subtle play button */
  transition: all 0.2s ease;
}

.video-play-button:hover {
  transform: scale(1.1);
  background-color: rgba(255, 255, 255, 0.95);
}

/* Enhanced grid responsiveness */
@media (max-width: 640px) {
  .grid-cols-2 {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

@media (min-width: 768px) {
  .md\:grid-cols-3 {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}

@media (min-width: 1024px) {
  .lg\:grid-cols-4 {
    grid-template-columns: repeat(4, minmax(0, 1fr));
  }
}

@media (min-width: 1280px) {
  .xl\:grid-cols-5 {
    grid-template-columns: repeat(5, minmax(0, 1fr));
  }
}

/* Optimized loading states */
.animate-pulse {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Enhanced hover effects */
.group:hover .group-hover\:scale-105 {
  transform: scale(1.05);
}

.group:hover .group-hover\:opacity-100 {
  opacity: 1;
}

/* Better contrast for badges and indicators */
.bg-black\/60 {
  background-color: rgba(0, 0, 0, 0.6);
}

.bg-white\/20 {
  background-color: rgba(255, 255, 255, 0.2);
}

/* Optimized backdrop blur */
.backdrop-blur-sm {
  backdrop-filter: blur(4px);
}

.backdrop-blur-md {
  backdrop-filter: blur(8px);
} 